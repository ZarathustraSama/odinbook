<%= render "shared/navbar" %>

<h1><%= @post.user.name %> posted:</h1>

<% if flash[:alert] %>
  <br>
  <div class="alert"><%= flash[:alert] %></div>
<% end %>

<div class="post">
  <% if @post.image_url %>
    <img src=<%= @post.image_url%>>
    <br>
  <% end %>
  <%= @post.body %>
  <br>
  <br>
  <% like = Like.where("user_id = ? AND post_id = ?", current_user.id, @post.id) %>

  <% if like.any? %>
    <%= form_with model: @post, url: like_path, method: :delete do |form| %>
      <%= form.hidden_field :id, :value => @post.id %>
      <%= form.submit "Unlike" %>
    <% end %>
  <% else %>
    <%= form_with model: @post, url: likes_path, method: :post do |form| %>
      <%= form.hidden_field :id, :value => @post.id %>
      <%= form.submit "Like" %>
    <% end %>
  <% end %>
</div>